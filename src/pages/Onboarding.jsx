import React,{useMemo, useState}from "react";const preset1 = {title: "Mẫu 1: MoneyFlow Style", groups: [{name: "Chi phí bắt buộc", items: [ "Tiền nhà", "Hóa đơn", "Ăn uống", "Đi lại", "Con cái", "Thú cưng", "Trả nợ/khoản vay", ],},{name: "Chi phí không thường xuyên", items: [ "Khám bệnh/thuốc men", "Bảo hiểm nhân thọ", "Bảo trì xe", "Quà tặng, hiếu hỉ", "Học phí, khoá học online", ],}, ],};const preset2 = {title: "Mẫu 2: 50/30/20", groups: [{name: "Nhu cầu thiết yếu(50%)", items: [ "Nhà ở", "Ăn uống hàng ngày", "Đi lại", "Bảo hiểm bắt buộc", "Thuốc men cơ bản", ],},{name: "Mong muốn(30%)", items: [ "Ăn ngoài / cafe", "Shopping / giải trí", "Du lịch", "Spa, massage", "Sở thích cá nhân", ],},{name: "Tiết kiệm & Đầu tư(20%)", items: [ "Quỹ khẩn cấp", "Mua nhà", "Mua xe", "Đầu tư dài hạn", "Nâng cấp thiết bị", "Học tập / phát triển bản thân", ],}, ],};const allItems = [...preset1.groups, ...preset2.groups].flatMap((g) = > g.items);export default function Onboarding({onComplete}){const [activePreset, setActivePreset] = useState(1);const [selected, setSelected] = useState(() = > []);const groups = useMemo(() = >(activePreset =  =  = 1 ? preset1.groups: preset2.groups), [activePreset]);const toggleItem = (label) = >{setSelected((prev) = > prev.includes(label)? prev.filter((l) = > l =  = label): [...prev, label]);};const selectAllCurrent = () = >{const currentItems = groups.flatMap((g) = > g.items);setSelected(Array.from(new Set([...selected, ...currentItems])));};return(<div className = "min-h-screen bg-yellow-50"> <div className = "max-w-lg mx-auto px-4 pt-6 pb-28"> <button onClick = {() = > window.history.back()}className = "text-gray-600 hover: text-gray-800 mb-4" aria-label = "Quay lại" > ← </button> <h1 className = "text-2xl font-extrabold text-yellow-900 leading-snug mb-2"> Hãy chọn các nhóm danh mục và danh mục để bắt đầu </h1> <p className = "text-gray-700 mb-5"> Đây là một vài gợi ý, bạn có thể chỉnh sửa bất kì lúc nào. </p> <div className = "flex gap-3 mb-5"> <button onClick = {() = > setActivePreset(1)}className = {`px-4 py-2 rounded-full border transition font-semibold ${activePreset =  =  = 1 ? "bg-yellow-400 text-yellow-900 border-yellow-400": "bg-white text-gray-800 border-gray-300"}`}> Mẫu 1: MoneyFlow Style </button> <button onClick = {() = > setActivePreset(2)}className = {`px-4 py-2 rounded-full border transition font-semibold ${activePreset =  =  = 2 ? "bg-yellow-500 text-yellow-900 border-yellow-500": "bg-white text-gray-800 border-gray-300"}`}> Mẫu 2: 50/30/20 </button> </div> <div className = "rounded-2xl border border-yellow-300 bg-yellow-100 p-4"> <div className = "flex justify-end mb-2"> <button onClick = {selectAllCurrent}className = "text-sm text-yellow-800 underline" > Chọn tất cả </button> </div>{groups.map((group) = >(<div key = {group.name}className = "mb-4"> <div className = "text-yellow-900 font-extrabold mb-2">{group.name}</div> <div className = "flex flex-wrap gap-3">{group.items.map((label) = >{const active = selected.includes(label);return(<button key = {label}onClick = {() = > toggleItem(label)}className = {`px-4 py-2 rounded-full text-base transition shadow-sm ${active ? "bg-yellow-500 text-yellow-950": "bg-white text-gray-900"}`}aria-label = {`Danh mục ${label}${active ? " đã chọn": ""}`}>{label}</button>);})}</div> </div>))}</div> <button onClick = {() = >{// Lưu lựa chọn và đánh dấu đã hoàn tất localStorage.setItem("onboarding_categories", JSON.stringify(selected.length ? selected));localStorage.setItem("onboarding_completed", "true");onComplete(selected.length ? selected);}}className = "fixed bottom-4 inset-x-4 bg-yellow-500 hover: bg-yellow-600 text-yellow-950 font-extrabold rounded-2xl py-4 text-center shadow-lg" > TIẾP TỤC → </button> </div> </div>);}